<%
# Saltstorm - Fun-Money Betting on the Web
# Copyright (C) 2013  Dustin Leavins
#
# Full license can be found in 'LICENSE.txt'
%>
<div ng-controller='FakeBetController'>
  <div class='page-header'>
    <h1><%= titleize() %></h1>
    <p>You are logged-in as {{ account.displayName }} - <a href='/logout'>Logout</a></p>
  </div>
  <div class='row main-video'>
    <div class='col-md-3'>
      <p>{{ match.participantA.name }}</p>
      <ul ng-show='match.bettors.a.length > 0'>
        <li ng-repeat='bettor in match.bettors.a'>{{bettor}}</li>
      </ul>
      <p>{{ match.participantB.name }}</p>
      <ul ng-show='match.bettors.b.length > 0'>
        <li ng-repeat='bettor in match.bettors.b'>{{ bettor }}</li>
      </ul>
    </div>
    <div class='col-md-6'>
      <%= @video_link %>
    </div>
  </div>
  <div class='row'>
    <div class='col-md-4 bet-a'>
      <div class='row'>
        <div class='col-md-6 participant-a'>
          <p>{{ match.participantA.name }}</p>
          <p>{{ match.participantA.amount | currency: "☺" }}</p>
        </div>
        <div class='col-md-6'>
          <p class='pull-right'><button type='button' class='btn btn-lg btn-bet-a' ng-click='submitBet("a")'>Bet</button></p>
        </div>
      </div>
    </div>
    <div class='col-md-4 bet-info'>
      <form name='betForm'>
        <div class='form-group' ng-class='{"has-error": betForm.amount.$invalid}'>
          <p>
          <input type='number'
                 class='form-control'
                 name='amount'
                 min='1'
                 placeholder='Bet amount'
                 required
                 ng-model='betAmount' />
          </p>
        </div>
        <p>Your Current Balance: {{ account.balance | currency: "☺"  }}</p>
      </form>
      <p ng-show='betUpdateFailed'>Could not update bet</p>
      <p ng-show='bettingThisRound'>You are betting this round!</p>
      <p ng-show='winnerName()'>Winner: {{ winnerName() }}</p>
      <p>Odds: {{ match.odds }}</p>
    </div>
    <div class='col-md-4 bet-b'>
      <div class='row'>
        <div class='col-md-6'>
          <p><button type='button' class='btn btn-lg btn-bet-b' ng-click='submitBet("b")'>Bet</button></p>
        </div>
        <div class='col-md-6 participant-b'>
          <p>{{ match.participantB.name }}</p>
          <p>{{ match.participantB.amount | currency: "☺" }}</p>
        </div>
      </div>
    </div>
  </div>
</div>
